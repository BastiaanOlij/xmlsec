<refentry id="xmlsec-xmlenc">
<refmeta>
<refentrytitle>xmlenc.h</refentrytitle>
<manvolnum>3</manvolnum>
<refmiscinfo>XMLSEC Library</refmiscinfo>
</refmeta>

<refnamediv>
<refname>xmlenc.h</refname><refpurpose>The <ulink url="http://www.w3.org/Encryption/">XML Encrypiton</ulink> 
standard implementation.</refpurpose>
</refnamediv>

<refsynopsisdiv><title>Synopsis</title>
<synopsis>



enum        <link linkend="xmlEncCtxMode">xmlEncCtxMode</link>;
struct      <link linkend="xmlSecEncCtx">xmlSecEncCtx</link>;
<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> <link linkend="xmlSecEncCtxCreate">xmlSecEncCtxCreate</link>          (<link linkend="xmlSecKeysMngrPtr">xmlSecKeysMngrPtr</link> keysMngr);
void        <link linkend="xmlSecEncCtxDestroy">xmlSecEncCtxDestroy</link>             (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx);
int         <link linkend="xmlSecEncCtxInitialize">xmlSecEncCtxInitialize</link>          (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx,
                                             <link linkend="xmlSecKeysMngrPtr">xmlSecKeysMngrPtr</link> keysMngr);
void        <link linkend="xmlSecEncCtxFinalize">xmlSecEncCtxFinalize</link>            (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx);
int         <link linkend="xmlSecEncCtxCopyUserPref">xmlSecEncCtxCopyUserPref</link>        (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> dst,
                                             <link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> src);
void        <link linkend="xmlSecEncCtxReset">xmlSecEncCtxReset</link>               (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx);
int         <link linkend="xmlSecEncCtxBinaryEncrypt">xmlSecEncCtxBinaryEncrypt</link>       (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx,
                                             <link linkend="xmlNodePtr">xmlNodePtr</link> tmpl,
                                             unsigned char *data,
                                             <link linkend="size-t">size_t</link> dataSize);
int         <link linkend="xmlSecEncCtxXmlEncrypt">xmlSecEncCtxXmlEncrypt</link>          (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx,
                                             <link linkend="xmlNodePtr">xmlNodePtr</link> tmpl,
                                             <link linkend="xmlNodePtr">xmlNodePtr</link> node);
int         <link linkend="xmlSecEncCtxUriEncrypt">xmlSecEncCtxUriEncrypt</link>          (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx,
                                             <link linkend="xmlNodePtr">xmlNodePtr</link> tmpl,
                                             const <link linkend="xmlChar">xmlChar</link> *uri);
int         <link linkend="xmlSecEncCtxDecrypt">xmlSecEncCtxDecrypt</link>             (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx,
                                             <link linkend="xmlNodePtr">xmlNodePtr</link> node);
<link linkend="xmlSecBufferPtr">xmlSecBufferPtr</link> <link linkend="xmlSecEncCtxDecryptToBuffer">xmlSecEncCtxDecryptToBuffer</link> (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx,
                                             <link linkend="xmlNodePtr">xmlNodePtr</link> node);
void        <link linkend="xmlSecEncCtxDebugDump">xmlSecEncCtxDebugDump</link>           (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx,
                                             <link linkend="FILE-CAPS">FILE</link> *output);
void        <link linkend="xmlSecEncCtxDebugXmlDump">xmlSecEncCtxDebugXmlDump</link>        (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx,
                                             <link linkend="FILE-CAPS">FILE</link> *output);
</synopsis>
</refsynopsisdiv>





<refsect1>
<title>Description</title>
<para>

</para>
</refsect1>

<refsect1>
<title>Details</title>
<refsect2>
<title><anchor id="xmlEncCtxMode">enum xmlEncCtxMode</title>
<programlisting>typedef enum {
    xmlEncCtxModeEncryptedData = 0,
    xmlEncCtxModeEncryptedKey
} xmlEncCtxMode;
</programlisting>
<para>

</para></refsect2>
<refsect2>
<title><anchor id="xmlSecEncCtx">struct xmlSecEncCtx</title>
<programlisting>struct xmlSecEncCtx {
    /* these data user can set before performing the operation */
    void*			userData;
    unsigned int		flags;
    unsigned int		flags2;    
    xmlEncCtxMode		mode;
    xmlSecTransformId		defEncMethodId;
    xmlSecKeyInfoCtx		keyInfoReadCtx;
    xmlSecKeyInfoCtx		keyInfoWriteCtx;
    xmlSecTransformCtx		encTransformCtx;

    /* these data are returned */
    xmlSecTransformOperation	operation;
    xmlSecBufferPtr		result;
    int				resultBase64Encoded;
    int				resultReplaced;
    xmlSecTransformPtr		encMethod;
    xmlSecKeyPtr		encKey;

    /* attributes from EncryptedData or EncryptedKey */    
    xmlChar*			id;
    xmlChar*			type;
    xmlChar*			mimeType;
    xmlChar*			encoding;
    xmlChar*			recipient;
    xmlChar*			carriedKeyName;

    /* these are internal data, nobody should change that except us */
    xmlNodePtr			encDataNode;
    xmlNodePtr			encMethodNode;
    xmlNodePtr			keyInfoNode;
    xmlNodePtr			cipherValueNode;
    
    /* reserved for future */
    void*			reserved0;
    void*			reserved1;
};
</programlisting>
<para>
XML Encrypiton context.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="struct">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row>
<entry>void *<structfield>userData</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry>unsigned int <structfield>flags</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry>unsigned int <structfield>flags2</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry><link linkend="xmlEncCtxMode">xmlEncCtxMode</link> <structfield>mode</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry><link linkend="xmlSecTransformId">xmlSecTransformId</link> <structfield>defEncMethodId</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry><link linkend="xmlSecKeyInfoCtx">xmlSecKeyInfoCtx</link> <structfield>keyInfoReadCtx</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry><link linkend="xmlSecKeyInfoCtx">xmlSecKeyInfoCtx</link> <structfield>keyInfoWriteCtx</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry><link linkend="xmlSecTransformCtx">xmlSecTransformCtx</link> <structfield>encTransformCtx</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry><link linkend="xmlSecTransformOperation">xmlSecTransformOperation</link> <structfield>operation</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry><link linkend="xmlSecBufferPtr">xmlSecBufferPtr</link> <structfield>result</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry>int <structfield>resultBase64Encoded</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry>int <structfield>resultReplaced</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry><link linkend="xmlSecTransformPtr">xmlSecTransformPtr</link> <structfield>encMethod</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry><link linkend="xmlSecKeyPtr">xmlSecKeyPtr</link> <structfield>encKey</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry><link linkend="xmlChar">xmlChar</link> *<structfield>id</structfield></entry>
<entry> the Id attribute of the  &lt;enc:EncryptedData&gt; node.
</entry>
</row>
<row>
<entry><link linkend="xmlChar">xmlChar</link> *<structfield>type</structfield></entry>
<entry> the Type attribute of the  &lt;enc:EncryptedData&gt; node.
</entry>
</row>
<row>
<entry><link linkend="xmlChar">xmlChar</link> *<structfield>mimeType</structfield></entry>
<entry> the MimeType attribute of the  &lt;enc:EncryptedData&gt; node.
</entry>
</row>
<row>
<entry><link linkend="xmlChar">xmlChar</link> *<structfield>encoding</structfield></entry>
<entry> the Encoding attribute of the  &lt;enc:EncryptedData&gt; node.
</entry>
</row>
<row>
<entry><link linkend="xmlChar">xmlChar</link> *<structfield>recipient</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry><link linkend="xmlChar">xmlChar</link> *<structfield>carriedKeyName</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry><link linkend="xmlNodePtr">xmlNodePtr</link> <structfield>encDataNode</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry><link linkend="xmlNodePtr">xmlNodePtr</link> <structfield>encMethodNode</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry><link linkend="xmlNodePtr">xmlNodePtr</link> <structfield>keyInfoNode</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry><link linkend="xmlNodePtr">xmlNodePtr</link> <structfield>cipherValueNode</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry>void *<structfield>reserved0</structfield></entry>
<entry>
</entry>
</row>
<row>
<entry>void *<structfield>reserved1</structfield></entry>
<entry>

</entry>
</row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="xmlSecEncCtxCreate">xmlSecEncCtxCreate ()</title>
<programlisting><link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> xmlSecEncCtxCreate          (<link linkend="xmlSecKeysMngrPtr">xmlSecKeysMngrPtr</link> keysMngr);</programlisting>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>keysMngr</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="xmlSecEncCtxDestroy">xmlSecEncCtxDestroy ()</title>
<programlisting>void        xmlSecEncCtxDestroy             (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx);</programlisting>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>encCtx</parameter>&nbsp;:</entry>
<entry>
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="xmlSecEncCtxInitialize">xmlSecEncCtxInitialize ()</title>
<programlisting>int         xmlSecEncCtxInitialize          (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx,
                                             <link linkend="xmlSecKeysMngrPtr">xmlSecKeysMngrPtr</link> keysMngr);</programlisting>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>encCtx</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><parameter>keysMngr</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="xmlSecEncCtxFinalize">xmlSecEncCtxFinalize ()</title>
<programlisting>void        xmlSecEncCtxFinalize            (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx);</programlisting>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>encCtx</parameter>&nbsp;:</entry>
<entry>


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="xmlSecEncCtxCopyUserPref">xmlSecEncCtxCopyUserPref ()</title>
<programlisting>int         xmlSecEncCtxCopyUserPref        (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> dst,
                                             <link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> src);</programlisting>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>dst</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><parameter>src</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="xmlSecEncCtxReset">xmlSecEncCtxReset ()</title>
<programlisting>void        xmlSecEncCtxReset               (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx);</programlisting>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>encCtx</parameter>&nbsp;:</entry>
<entry>


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="xmlSecEncCtxBinaryEncrypt">xmlSecEncCtxBinaryEncrypt ()</title>
<programlisting>int         xmlSecEncCtxBinaryEncrypt       (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx,
                                             <link linkend="xmlNodePtr">xmlNodePtr</link> tmpl,
                                             unsigned char *data,
                                             <link linkend="size-t">size_t</link> dataSize);</programlisting>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>encCtx</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><parameter>tmpl</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><parameter>data</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><parameter>dataSize</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="xmlSecEncCtxXmlEncrypt">xmlSecEncCtxXmlEncrypt ()</title>
<programlisting>int         xmlSecEncCtxXmlEncrypt          (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx,
                                             <link linkend="xmlNodePtr">xmlNodePtr</link> tmpl,
                                             <link linkend="xmlNodePtr">xmlNodePtr</link> node);</programlisting>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>encCtx</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><parameter>tmpl</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><parameter>node</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="xmlSecEncCtxUriEncrypt">xmlSecEncCtxUriEncrypt ()</title>
<programlisting>int         xmlSecEncCtxUriEncrypt          (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx,
                                             <link linkend="xmlNodePtr">xmlNodePtr</link> tmpl,
                                             const <link linkend="xmlChar">xmlChar</link> *uri);</programlisting>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>encCtx</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><parameter>tmpl</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><parameter>uri</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="xmlSecEncCtxDecrypt">xmlSecEncCtxDecrypt ()</title>
<programlisting>int         xmlSecEncCtxDecrypt             (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx,
                                             <link linkend="xmlNodePtr">xmlNodePtr</link> node);</programlisting>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>encCtx</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><parameter>node</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="xmlSecEncCtxDecryptToBuffer">xmlSecEncCtxDecryptToBuffer ()</title>
<programlisting><link linkend="xmlSecBufferPtr">xmlSecBufferPtr</link> xmlSecEncCtxDecryptToBuffer (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx,
                                             <link linkend="xmlNodePtr">xmlNodePtr</link> node);</programlisting>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>encCtx</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><parameter>node</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry>


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="xmlSecEncCtxDebugDump">xmlSecEncCtxDebugDump ()</title>
<programlisting>void        xmlSecEncCtxDebugDump           (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx,
                                             <link linkend="FILE-CAPS">FILE</link> *output);</programlisting>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>encCtx</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><parameter>output</parameter>&nbsp;:</entry>
<entry>


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="xmlSecEncCtxDebugXmlDump">xmlSecEncCtxDebugXmlDump ()</title>
<programlisting>void        xmlSecEncCtxDebugXmlDump        (<link linkend="xmlSecEncCtxPtr">xmlSecEncCtxPtr</link> encCtx,
                                             <link linkend="FILE-CAPS">FILE</link> *output);</programlisting>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>encCtx</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><parameter>output</parameter>&nbsp;:</entry>
<entry>


</entry></row>
</tbody></tgroup></informaltable></refsect2>

</refsect1>




</refentry>
