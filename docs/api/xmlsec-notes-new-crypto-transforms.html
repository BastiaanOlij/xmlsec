<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Cryptographic transforms.</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="XML Security Library Reference Manual"
HREF="index.html"><LINK
REL="UP"
TITLE="Adding support for new cryptographic library."
HREF="xmlsec-notes-new-crypto.html"><LINK
REL="PREVIOUS"
TITLE="Klasses and objects."
HREF="xmlsec-notes-new-crypto-klasses.html"><LINK
REL="NEXT"
TITLE="Keys data and keys data stores."
HREF="xmlsec-notes-new-crypto-keys.html"><STYLE
TYPE="text/css"
>.synopsis, .classsynopsis {
    background: #eeeeee;
    border: solid 1px #aaaaaa;
    padding: 0.5em;
}
.programlisting {
    background: #eeeeff;
    border: solid 1px #aaaaff;
    padding: 0.5em;
}
.variablelist {
    padding: 4px;
    margin-left: 3em;
}
.navigation {
    background: #ffeeee;
    border: solid 1px #ffaaaa;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
}
.navigation a {
    color: #770000;
}
.navigation a:visited {
    color: #550000;
}
.navigation .title {
    font-size: 200%;
}</STYLE
></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><TABLE
WIDTH="100%"
CLASS="navigation"
SUMMARY="Navigation header"
CELLPADDING="2"
CELLSPACING="2"
><TR
VALIGN="middle"
><TD
><A
ACCESSKEY="p"
HREF="xmlsec-notes-new-crypto-klasses.html"
><IMG
SRC="left.png"
WIDTH="16"
HEIGHT="16"
BORDER="0"
ALT="Prev"></A
></TD
><TD
><A
ACCESSKEY="u"
HREF="xmlsec-notes-new-crypto.html"
><IMG
SRC="up.png"
WIDTH="16"
HEIGHT="16"
BORDER="0"
ALT="Up"></A
></TD
><TD
><A
ACCESSKEY="h"
HREF="index.html"
><IMG
SRC="home.png"
WIDTH="16"
HEIGHT="16"
BORDER="0"
ALT="Home"></A
></TD
><TH
WIDTH="100%"
align="center"
>XML Security Library Reference Manual</TH
><TD
><A
ACCESSKEY="n"
HREF="xmlsec-notes-new-crypto-keys.html"
><IMG
SRC="right.png"
WIDTH="16"
HEIGHT="16"
BORDER="0"
ALT="Next"></A
></TD
></TR
></TABLE
><BR
CLEAR="all"><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="XMLSEC-NOTES-NEW-CRYPTO-TRANSFORMS"
>Cryptographic transforms.</A
></H1
><P
>The cryptographic transforms (digests, signatures and encryption)
	implementation is the main goal of "xmlsec-&lt;crypto&gt;" library.
	Most of the cryptographic <A
HREF="xmlsec-notes-transforms.html"
>transforms</A
> 
	use default <CODE
CLASS="STRUCTFIELD"
>pushBin</CODE
> and <CODE
CLASS="STRUCTFIELD"
>popBin</CODE
> 
	methods and provide custom <A
HREF="xmlsec-transforms.html#XMLSECTRANSFORMEXECUTEMETHOD"
>execute</A
> method. 
	The binary transform <A
HREF="xmlsec-transforms.html#XMLSECTRANSFORMEXECUTEMETHOD"
>execute</A
> method 
	processes data from the input buffer
	<CODE
CLASS="STRUCTFIELD"
>inBuf</CODE
> and pushes results to
	<CODE
CLASS="STRUCTFIELD"
>outBuf</CODE
>. The transform should try to
	consume and remove data from <CODE
CLASS="STRUCTFIELD"
>inBuf</CODE
> buffer
	as soon as the data became available. However, it might happen
	that current data size in the input buffer is not enough (for example,
	RSA-PKCS1 algorithm requires that all the data are available in 
	one buffer). In this case, transform might keep the data in the 
	input buffer till the next call to 
	<A
HREF="xmlsec-transforms.html#XMLSECTRANSFORMEXECUTEMETHOD"
>execute</A
>
	method. The "last" parameter of the 
	<A
HREF="xmlsec-transforms.html#XMLSECTRANSFORMEXECUTEMETHOD"
>execute</A
>
	indicates that transform MUST process all the data in the input buffer
	and return as much as possible in the output buffer. The 
	<A
HREF="xmlsec-transforms.html#XMLSECTRANSFORMEXECUTEMETHOD"
>execute</A
> method 
	might be called multiple times with non-zero "last" parameter until 
	the transforms returns nothing
	in the output buffer. In addition, the transform implementation is 
	responsible for managing the transform <CODE
CLASS="STRUCTFIELD"
>status</CODE
> 
	variable.
	<DIV
CLASS="TABLE"
><A
NAME="AEN590"
></A
><P
><B
>Table 2. Typical transform status managing.</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
>xmlSecTransformStatusNone</TD
><TD
>Transform initializes itself (for example, cipher transform 
	generates or reads IV) and sets <CODE
CLASS="STRUCTFIELD"
>status</CODE
> 
	variable to xmlSecTransformStatusWorking.</TD
></TR
><TR
><TD
>xmlSecTransformStatusWorking</TD
><TD
>Transform process the next (if "last" parameter is zero) or
	last block of data (if "last" parameter is non-zero).
	When transform returns all the data, it sets the 
	<CODE
CLASS="STRUCTFIELD"
>status</CODE
> variable to 
	xmlSecTransformStatusFinished.</TD
></TR
><TR
><TD
>xmlSecTransformStatusFinished</TD
><TD
>Transform returns no data to indicate that it finished
	processing.</TD
></TR
></TBODY
></TABLE
></DIV
>	
	</P
><P
>In adition to <A
HREF="xmlsec-transforms.html#XMLSECTRANSFORMEXECUTEMETHOD"
>execute</A
>
	methods, signature, hmac or digest transforms 
	MUST implement <A
HREF="xmlsec-transforms.html#XMLSECTRANSFORMVERIFYMETHOD"
>verify</A
> method. 
	The <A
HREF="xmlsec-transforms.html#XMLSECTRANSFORMVERIFYMETHOD"
>verify</A
> method is called
	after transform execution is finished. The 
	<A
HREF="xmlsec-transforms.html#XMLSECTRANSFORMVERIFYMETHOD"
>verify</A
> method implementation 
	must set the "status" member to <A
HREF="xmlsec-transforms.html#XMLSECTRANSFORMSTATUSOK"
>xmlSecTransformStatusOk</A
>
	if signature, hmac or digest is successfuly verified or to
	<A
HREF="xmlsec-transforms.html#XMLSECTRANSFORMSTATUSFAIL"
>xmlSecTransformStatusFail</A
>
	otherwise.
	</P
><P
>The transforms that require a key (signature or encryption 
	transforms, for example) MUST imlpement 
	<A
HREF="xmlsec-transforms.html#XMLSECTRANSFORMSETKEYREQUIREMENTSMETHOD"
>setKeyReq</A
> 
	(prepares the <A
HREF="xmlsec-keys.html#XMLSECKEYREQ"
>key requirements</A
>
	for key search) and
	<A
HREF="xmlsec-transforms.html#XMLSECTRANSFORMSETKEYMETHOD"
>setKey</A
> 
	(sets the key in the transform) methods. 
	</P
></DIV
><TABLE
CLASS="navigation"
WIDTH="100%"
SUMMARY="Navigation footer"
CELLPADDING="2"
CELLSPACING="2"
><TR
VALIGN="middle"
><TD
ALIGN="left"
><A
ACCESSKEY="p"
HREF="xmlsec-notes-new-crypto-klasses.html"
><B
>&lt;&lt;&lt;&nbsp;Klasses and objects.</B
></A
></TD
><TD
ALIGN="right"
><A
ACCESSKEY="n"
HREF="xmlsec-notes-new-crypto-keys.html"
><B
>Keys data and keys data stores.&nbsp;&gt;&gt;&gt;</B
></A
></TD
></TR
></TABLE
></BODY
></HTML
>